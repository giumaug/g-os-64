TEMP MAPPING

CR3-> C05000                 PML4
C05000 -> C06000             page dir ptr
MAPPING LOADER 0-16M VIRT TO 0-16M VIRT
C06000 -> C07000             page dir 
C07000 -> C08000             page table 1
C07008 -> C09000             page table 2
C07010 -> C0A000             page table 3
C07018 -> C0B000             page table 4
C07020 -> C0C000             page table 5
C07028 -> C0D000             page table 6
C07030 -> C0E000             page table 7
C07038 -> C0F000             page table 8

C08000 0000
C08008 1000
C08010 2000
....
C08FF8 1FF000

C09000 200000
C09004 201000
C09008 202000
....
C09FF8 3FF000

C0A000 400000
C0A004 401000
C0A008 402000
....
C0AFF8 5FF000

C0B000 600000
C0B004 601000
C0B008 602000
....
C0BFF8 7FF000

C0C000 800000
C0C004 801000
C0C008 802000
....
C0CFF8 9FF000

C0D000 A00000
C0D004 A01000
C0D008 A02000
....
C0DFF8 BFF000

C0E000 C00000
C0E008 C22000
....
C0EFF8 DFF000

C0F000 E00000
C0F004 E01000
C0F008 E22000
....
C0FFF8 FFF000

MAPPING KERNEL 16-32M VIRT TO 0-16M VIRT
C6000 -> C10000             pag dir
C10000 -> C11000             page table 1
C10008 -> C12000             page table 2
C10010 -> C13000             page table 3
C10018 -> C14000             page table 4
C10020 -> C15000             page table 5
C10028 -> C16000             page table 6
C10030 -> C17000             page table 7
C10038 -> C18000             page table 8

C11000 -> 400000000
C11008 -> 400001000
C11010 -> 400002000
.....
C11FF8 -> 4001FF000

C12000 -> 400200000
C12004 -> 400201000
C12008 -> 400202000
....
C12FF8 -> 4003FF000

C13000 -> 400400000
C13004 -> 400401000
C13008 -> 400402000
....
C13FF8 -> 4005FF000

C14000 -> 400600000
C14004 -> 400601000
C14008 -> 400602000
....
C14FF8 -> 4007FF000

C15000 -> 400800000
C15004 -> 400801000
C15008 -> 400802000
....
C15FF8 -> 4009FF000

C16000 -> 400A00000
C16004 -> 400A01000
C16008 -> 400A02000
....
C16FF8 -> 400BFF000

C17000 -> 400C00000
C17004 -> 400C01000
C17008 -> 400C02000
....
C17FF8 -> 400DFF000

C18000 -> 400E00000
C18004 -> 400E01000
C18008 -> 400E02000
....
C18FF8 -> 400FFF000

       pd         pt
1 000000000 000000000 000000000000

1000000000000000000



512*4096


512*4096 = 2097152 =   2048k
1G     = 1048576k

1048576
262144

2097152
4194304

0x400000000
0x440000000
  43FFFFFFF

ptr      pd         pt          offset
10000 000000000 000000000 000000000000
10001 000000000 000000000 000000000000

16->17

ptr -> pd1 -> pt1 - pt512 -> pt1 512 pages
    -> pd2

10000 000000000 000000000 000000000000
10000 111111111 111111111 111111111111


4096+(512*4096)+4096+(8*4096) 

512*512*4096

33M

4096*3 + 

33 MB richiesti per master page table che mappa 16G
4096+4096+(4096*16)+16*(4096*512)

80KB per mappare 33MB
4096+4096+4096+(4096*17)


#define MASTER_PML4 0xD00000
#define MASTER_PTR 0xD01000
#define MASTER_DIR  0xD02000 
#define MASTER_PAGES 0xD11000








 




























